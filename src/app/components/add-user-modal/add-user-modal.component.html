<!-- The Modal -->
<div class="modal glass">
    <!-- Modal content -->
    <div class="form-div glass">
        <div id="particles-js"></div>
        <span class="close" (click)="closeModal()">&times;</span>
        <!-- Butonul de ascundere formular. La evenimentul click se apeleaza functia closeModal() a componentei curente (add-user-modal) si modala se va inchide-->


        <ng-template [ngIf]="modalType==='editModalType'" [ngIfElse]="addModalType">
            <div class="title">Edit Account</div>
        </ng-template>
        <ng-template #addModalType>
            <div class="title">Add new user</div>
        </ng-template>


        <form [formGroup]="userForm" autocomplete="off" class="form-grid">
            <!-- Specificam numele formularului din typescript -->

            <ng-template [ngIf]="modalRole==='admin'">

                <!-- User details -->
                <div class="column">
                    <div class="input-container ic1">
                        <!-- la fiecare input specificam numele variabilei din typescript -->
                        <input id="department" class="input" type="text" formControlName="department" placeholder=" "
                            required maxlength="10">
                        <label for="department" class="placeholder">Department:</label>
                    </div>
                    <div *ngIf="errorSource === 'department'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div>
    
                    <div class="input-container ic2">
                        <input id="position" class="input" type="text" formControlName="position" placeholder=" " required
                            maxlength="30">
                        <label for="position" class="placeholder">Position:</label>
                    </div>
                    <div *ngIf="errorSource === 'position'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div>

                    <div class="input-container ic2">
                        <select id="role" class="input" name="role" formControlName="role" (change)="onRoleChange()">
                            <option disabled selected value="">Role</option>
                            <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
                        </select>
    
                        <!-- <label for="role" class="placeholder"></label> -->
                    </div>
                    <div *ngIf="errorSource === 'role'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div>
                </div>

                
                <!-- Personal information -->
                <div class="column">
                    <div class="input-container ic1">
                        <!-- la fiecare input specificam numele variabilei din typescript -->
                        <input id="firstName" class="input" type="text" formControlName="firstName" placeholder=" "
                            required maxlength="10">    
                        <label for="firstName" class="placeholder">First name:</label>
                    </div>
                    <!-- <div *ngIf="errorSource === 'department'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div> -->
    
                    <div class="input-container ic1">
                        <!-- la fiecare input specificam numele variabilei din typescript -->
                        <input id="lastName" class="input" type="text" formControlName="lastName" placeholder=" "
                            required maxlength="10">    
                        <label for="lastName" class="placeholder">Last name:</label>
                    </div>
                    <!-- <div *ngIf="errorSource === 'department'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div> -->
    
                    
    
                    <div class="input-container ic1">
                        <!-- la fiecare input specificam numele variabilei din typescript -->
                        <input id="country" class="input" type="text" formControlName="country" placeholder=" "
                            required maxlength="10">    
                        <label for="country" class="placeholder">Country:</label>
                    </div>
                    <!-- <div *ngIf="errorSource === 'department'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div> -->
    
                    <div class="input-container ic1">
                        <!-- la fiecare input specificam numele variabilei din typescript -->
                        <input id="county" class="input" type="text" formControlName="county" placeholder=" "
                            required maxlength="10">    
                        <label for="county" class="placeholder">County:</label>
                    </div>
                    <!-- <div *ngIf="errorSource === 'department'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div> -->
                   
                    <div class="input-container ic1">
                        <!-- la fiecare input specificam numele variabilei din typescript -->
                        <input id="city" class="input" type="text" formControlName="city" placeholder=" "
                            required maxlength="10">    
                        <label for="city" class="placeholder">City:</label>
                    </div>
                    <!-- <div *ngIf="errorSource === 'department'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div> -->
    
                    <div class="input-container ic1">
                        <!-- la fiecare input specificam numele variabilei din typescript -->
                        <input id="cnp" class="input" type="text" formControlName="cnp" placeholder=" "
                            required maxlength="10">    
                        <label for="cnp" class="placeholder">CNP:</label>
                    </div>
                    <!-- <div *ngIf="errorSource === 'department'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div> -->
    
                    <div class="input-container ic1">
                        <!-- la fiecare input specificam numele variabilei din typescript -->
                        <input id="number" class="input" type="text" formControlName="number" placeholder=" "
                            required maxlength="10">    
                        <label for="number" class="placeholder">Identity Card Number:</label>
                    </div>
                    <!-- <div *ngIf="errorSource === 'department'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div> -->
    
                    <div class="input-container ic1">
                        <!-- la fiecare input specificam numele variabilei din typescript -->
                        <input id="series" class="input" type="text" formControlName="series" placeholder=" "
                            required maxlength="10">    
                        <label for="series" class="placeholder">Identity Card Series:</label>
                    </div>
                    <!-- <div *ngIf="errorSource === 'department'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div> -->
    
                    <div class="input-container ic1">
                        <!-- la fiecare input specificam numele variabilei din typescript -->
                        <input id="issuer" class="input" type="text" formControlName="issuer" placeholder=" "
                            required maxlength="10">    
                        <label for="issuer" class="placeholder">Identity Card Issuer:</label>
                    </div>
                    <!-- <div *ngIf="errorSource === 'department'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div> -->
    
                    <div class="input-container ic1">
                        <!-- la fiecare input specificam numele variabilei din typescript -->
                        <input id="issuing_date" class="input" type="text" formControlName="issuing_date" placeholder=" "
                            required maxlength="10">    
                        <label for="issuing_date" class="placeholder">Identity Card Issuing Date:</label>
                    </div>
                    <!-- <div *ngIf="errorSource === 'department'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div> -->
                </div>

                <!-- Contact -->
                <div column>
                    <div class="input-container ic2">
                        <input id="email" class="input" type="email" formControlName="email" placeholder=" " required
                            maxlength="60">
                        <!--<div class="cut"></div>-->
    
                        <label for="email" class="placeholder">E-mail:</label>
                    </div>
                    <div *ngIf="errorSource === 'email'" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div>
                </div>

                
            </ng-template>


            <div class="input-container ic2">
                <input id="phoneNumber" class="input" type="text" formControlName="phoneNumber" placeholder=" " required
                    maxlength="10">
                <label for="phone" class="placeholder">Phone number:</label>
            </div>
            <div *ngIf="errorSource === 'phone'" class="alert alert-danger" role="alert">
                {{ errorMessage }}
            </div>


            <div class="input-container ic2">
                <input id="password" class="input" type="text" formControlName="password" placeholder=" " required
                    maxlength="60">
                <!--<div class="cut"></div>-->

                <label for="password" class="placeholder">Password:</label>
            </div>
            <div *ngIf="errorSource === 'password'" class="alert alert-danger" role="alert">
                {{ errorMessage }}
            </div>

            <div *ngIf="errorSource === 'default'" class="alert alert-danger" role="alert">
                {{ errorMessage }}
            </div>

        </form>


        <ng-template [ngIf]="modalType==='editModalType'">
            <button type="button" class="submit" (click)="updateUser()">Update</button>
            <!-- Butonul de update utilizator. La evenimentul click se apeleaza functia updateUser() a componentei curente (add-user-modal) si utilzatorul va fi updated-->
        </ng-template>
        <ng-template [ngIf]="modalType!=='editModalType'">
            <button type="button" class="submit" (click)="addUser()">Add</button>
            <!-- Butonul de adaugare utilizator. La evenimentul click se apeleaza functia addUser() a componentei curente (add-user-modal) si utilzatorul va fi inregistrat-->
        </ng-template>
        <!-- Nu am folosit ngIfElse pentru ca apareau conflicte de CSS -->

    </div>
</div>